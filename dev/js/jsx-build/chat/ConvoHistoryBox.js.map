{"version":3,"sources":["../../components/chat/ConvoHistoryBox.jsx"],"names":[],"mappings":";;AAAA,IAAI,eAAe,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACtC,QAAM,EAAE,kBAAW;;AAEjB,QAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC5C,QAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;AACzB,QAAI,OAAO,GAAG,OAAO,CAAC;;AAEtB,QAAG,QAAQ,CAAC,MAAM,GAAE,CAAC,EAAG;AACtB,UAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9B,eAAO,GAAG,MAAM,CAAC;OAClB;KACF;AACD,QAAI,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAS,OAAO,EAAE,GAAG,EAAC;AACpD,UAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,IAAI,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,GAAE,MAAM,CAAC;AAC7D,UAAI,KAAK,GAAG,KAAK,CAAC;AAClB,UAAG,GAAG,KAAK,CAAC,EAAC;AACX,aAAK,GAAG,IAAI,CAAC;OACd,MAAM,IAAG,IAAI,IAAI,MAAM,EAAE;AACxB,aAAK,GAAG,QAAQ,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC;OAChE,MAAM,IAAI,IAAI,IAAI,IAAI,EAAE;AACvB,aAAK,GAAG,QAAQ,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC;OACnE;AACD,UAAI,SAAS,GAAG,EAAE,CAAA;AAClB,UAAI,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;AAC9B,iBAAS,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;OACtD;;AAED,UAAI,SAAS,GAAG,EAAE,CAAA;AAClB,UAAG,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC,EAAC;AACrC,YAAI,EAAE,GAAG,OAAO,CAAC,SAAS,CAAC;AAC3B,iBAAS,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;OAClC;;AAED,aACE,oBAAC,aAAa,IAAC,GAAG,EAAE,OAAO,CAAC,GAAG,AAAC;AAC9B,YAAI,EAAE,IAAI,AAAC;AACX,YAAI,EAAE,OAAO,CAAC,SAAS,CAAC,AAAC;AACzB,aAAK,EAAE,KAAK,CAAC,QAAQ,EAAE,AAAC;AACxB,iBAAS,EAAE,SAAS,AAAC;AACrB,eAAO,EAAE,OAAO,AAAC;AACjB,iBAAS,EAAE,SAAS,AAAC,GAAG,CAC1B;KACH,CAAC,CAAC;AACH,WACE;;QAAK,SAAS,EAAC,iBAAiB;MAC7B,YAAY;KACT,CACP;GACF;CACF,CAAC,CAAC","file":"ConvoHistoryBox.js","sourcesContent":["var ConvoHistoryBox = React.createClass({\n  render: function() {\n\n    var messages = this.props.match['messages'];\n    var m = this.props.match;\n    var started = 'false';\n\n    if(messages.length >0 ) {\n      if(messages[0].from.length > 0) {\n        started = 'true';\n      }\n    }\n    var messageNodes = messages.map(function(message, idx){\n      var from = Global.tinderId == message['from'] ? \"me\" :\"them\";\n      var first = false;\n      if(idx === 0){\n        first = true;\n      } else if(from == 'them') {\n        first = messages[idx-1]['from'] == m.person._id ? false : true;\n      } else if (from == 'me') {\n        first = messages[idx-1]['from'] == Global.tinderId ? false : true;\n      }\n      var their_pic = ''\n      if (m.hasOwnProperty('person')) {\n        their_pic = m.person.photos[0].processedFiles[2].url;\n      }\n\n      var timestamp = ''\n      if(message.hasOwnProperty('sent_date')){\n        var ts = message.sent_date;\n        timestamp = moment(ts).fromNow();\n      }\n\n      return (\n        <MessageBubble key={message._id}\n          from={from}\n          text={message['message']}\n          first={first.toString()}\n          their_pic={their_pic}\n          started={started}\n          timestamp={timestamp} />\n      );\n    });\n    return (\n      <div className=\"convoHistoryBox\">\n        {messageNodes}\n      </div>\n    )\n  }\n});"]}